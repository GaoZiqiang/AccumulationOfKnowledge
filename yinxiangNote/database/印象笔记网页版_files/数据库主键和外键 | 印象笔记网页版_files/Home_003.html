<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><style type="text/css">@font-face{font-family:caecilia;src:url(/redesign/global/css/fonts/caecilialtstd-light-webfont.eot?#iefix) format("embedded-opentype"), url(/redesign/global/css/fonts/caecilialtstd-light-webfont.woff) format("woff"), url(/redesign/global/css/fonts/caecilialtstd-light-webfont.ttf) format("truetype"), url(/redesign/global/css/fonts/caecilialtstd-light-webfont.svg#webfont_bold) format("svg");font-weight:300;font-style:normal;}@font-face{font-family:caecilia-300-normal;src:url(/redesign/global/css/fonts/caecilialtstd-light-webfont.eot);src:url(/redesign/global/css/fonts/caecilialtstd-light-webfont.eot?#iefix) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:caecilia;src:url(/redesign/global/css/fonts/caecilialtstd-lightitalic-webfont.eot?#iefix) format("embedded-opentype"), url(/redesign/global/css/fonts/caecilialtstd-lightitalic-webfont.woff) format("woff"), url(/redesign/global/css/fonts/caecilialtstd-lightitalic-webfont.ttf) format("truetype"), url(/redesign/global/css/fonts/caecilialtstd-lightitalic-webfont.svg#webfont_bold) format("svg");font-weight:300;font-style:italic;}@font-face{font-family:caecilia-300-italic;src:url(/redesign/global/css/fonts/caecilialtstd-lightitalic-webfont.eot);src:url(/redesign/global/css/fonts/caecilialtstd-lightitalic-webfont.eot?#iefix) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:caecilia;src:url(/redesign/global/css/fonts/caecilialtstd-roman-webfont.eot?#iefix) format("embedded-opentype"), url(/redesign/global/css/fonts/caecilialtstd-roman-webfont.woff) format("woff"), url(/redesign/global/css/fonts/caecilialtstd-roman-webfont.ttf) format("truetype"), url(/redesign/global/css/fonts/caecilialtstd-roman-webfont.svg#webfont_bold) format("svg");font-weight:400;font-style:normal;}@font-face{font-family:caecilia-400-normal;src:url(/redesign/global/css/fonts/caecilialtstd-roman-webfont.eot);src:url(/redesign/global/css/fonts/caecilialtstd-roman-webfont.eot?#iefix) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:caecilia;src:url(/redesign/global/css/fonts/caecilialtstd-italic-webfont.eot?#iefix) format("embedded-opentype"), url(/redesign/global/css/fonts/caecilialtstd-italic-webfont.woff) format("woff"), url(/redesign/global/css/fonts/caecilialtstd-italic-webfont.ttf) format("truetype"), url(/redesign/global/css/fonts/caecilialtstd-italic-webfont.svg#webfont_bold) format("svg");font-weight:400;font-style:italic;}@font-face{font-family:caecilia-400-italic;src:url(/redesign/global/css/fonts/caecilialtstd-italic-webfont.eot);src:url(/redesign/global/css/fonts/caecilialtstd-italic-webfont.eot?#iefix) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:caecilia;src:url(/redesign/global/css/fonts/caecilialtstd-bold-webfont.eot?#iefix) format("embedded-opentype"), url(/redesign/global/css/fonts/caecilialtstd-bold-webfont.woff) format("woff"), url(/redesign/global/css/fonts/caecilialtstd-bold-webfont.ttf) format("truetype"), url(/redesign/global/css/fonts/caecilialtstd-bold-webfont.svg#webfont_bold) format("svg");font-weight:700;font-style:normal;}@font-face{font-family:caecilia-700-normal;src:url(/redesign/global/css/fonts/caecilialtstd-bold-webfont.eot);src:url(/redesign/global/css/fonts/caecilialtstd-bold-webfont.eot?#iefix) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:caecilia;src:url(/redesign/global/css/fonts/caecilialtstd-bolditalic-webfont.eot?#iefix) format("embedded-opentype"), url(/redesign/global/css/fonts/caecilialtstd-bolditalic-webfont.woff) format("woff"), url(/redesign/global/css/fonts/caecilialtstd-bolditalic-webfont.ttf) format("truetype"), url(/redesign/global/css/fonts/caecilialtstd-bolditalic-webfont.svg#webfont_bold) format("svg");font-weight:700;font-style:italic;}@font-face{font-family:caecilia-700-italic;src:url(/redesign/global/css/fonts/caecilialtstd-bolditalic-webfont.eot);src:url(/redesign/global/css/fonts/caecilialtstd-bolditalic-webfont.eot?#iefix) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:evernote_rhonda;src:url(/redesign/global/css/fonts/evernoterhonda-regular-webfont.eot?#iefix) format("embedded-opentype"), url(/redesign/global/css/fonts/evernoterhonda-regular-webfont.woff) format("woff"), url(/redesign/global/css/fonts/evernoterhonda-regular-webfont.ttf) format("truetype"), url(/redesign/global/css/fonts/evernoterhonda-regular-webfont.svg#webfont_bold) format("svg");font-weight:normal;font-style:normal;}@font-face{font-family:evernote_rhonda-normal-normal;src:url(/redesign/global/css/fonts/evernoterhonda-regular-webfont.eot);src:url(/redesign/global/css/fonts/evernoterhonda-regular-webfont.eot?#iefix) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:gotham;src:local("?"), url(/redesign/global/css/fonts/04F6D068D4A33A1DF.eot?#hfj) format("embedded-opentype"), url(/redesign/global/css/fonts/gotham-light.woff) format("woff");font-weight:300;font-style:normal;}@font-face{font-family:gotham-300-normal;src:url(/redesign/global/css/fonts/04F6D068D4A33A1DF.eot);src:local("?"), url(/redesign/global/css/fonts/04F6D068D4A33A1DF.eot?#hfj) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:gotham;src:local("?"), url(/redesign/global/css/fonts/F4671B5B0A865F73C.eot?#hfj) format("embedded-opentype"), url(/redesign/global/css/fonts/gotham-light-italic.woff) format("woff");font-weight:300;font-style:italic;}@font-face{font-family:gotham-300-italic;src:url(/redesign/global/css/fonts/F4671B5B0A865F73C.eot);src:local("?"), url(/redesign/global/css/fonts/F4671B5B0A865F73C.eot?#hfj) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:gotham;src:local("?"), url(/redesign/global/css/fonts/0E1C61EA7744BAF6E.eot?#hfj) format("embedded-opentype"), url(/redesign/global/css/fonts/gotham-book.woff) format("woff");font-weight:400;font-style:normal;}@font-face{font-family:gotham-400-normal;src:url(/redesign/global/css/fonts/0E1C61EA7744BAF6E.eot);src:local("?"), url(/redesign/global/css/fonts/0E1C61EA7744BAF6E.eot?#hfj) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:gotham;src:local("?"), url(/redesign/global/css/fonts/6DD66284BA5A9CFF6.eot?#hfj) format("embedded-opentype"), url(/redesign/global/css/fonts/gotham-book-italic.woff) format("woff");font-weight:400;font-style:italic;}@font-face{font-family:gotham-400-italic;src:url(/redesign/global/css/fonts/6DD66284BA5A9CFF6.eot);src:local("?"), url(/redesign/global/css/fonts/6DD66284BA5A9CFF6.eot?#hfj) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:gotham;src:local("?"), url(/redesign/global/css/fonts/140183092F34C88B5.eot?#hfj) format("embedded-opentype"), url(/redesign/global/css/fonts/gotham-medium.woff) format("woff");font-weight:500;font-style:normal;}@font-face{font-family:gotham-500-normal;src:url(/redesign/global/css/fonts/140183092F34C88B5.eot);src:local("?"), url(/redesign/global/css/fonts/140183092F34C88B5.eot?#hfj) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:gotham;src:local("?"), url(/redesign/global/css/fonts/A3C99C48DFF681102.eot?#hfj) format("embedded-opentype"), url(/redesign/global/css/fonts/gotham-medium-italic.woff) format("woff");font-weight:500;font-style:italic;}@font-face{font-family:gotham-500-italic;src:url(/redesign/global/css/fonts/A3C99C48DFF681102.eot);src:local("?"), url(/redesign/global/css/fonts/A3C99C48DFF681102.eot?#hfj) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:gotham;src:local("?"), url(/redesign/global/css/fonts/A3FE1652E9A9460E6.eot?#hfj) format("embedded-opentype"), url(/redesign/global/css/fonts/gotham-bold.woff) format("woff");font-weight:700;font-style:normal;}@font-face{font-family:gotham-700-normal;src:url(/redesign/global/css/fonts/A3FE1652E9A9460E6.eot);src:local("?"), url(/redesign/global/css/fonts/A3FE1652E9A9460E6.eot?#hfj) format("embedded-opentype");font-weight:normal;font-style:normal;}@font-face{font-family:gotham;src:local("?"), url(/redesign/global/css/fonts/9E86ED56F0272CCE6.eot?#hfj) format("embedded-opentype"), url(/redesign/global/css/fonts/gotham-bold-italic.woff) format("woff");font-weight:700;font-style:italic;}@font-face{font-family:gotham-700-italic;src:url(/redesign/global/css/fonts/9E86ED56F0272CCE6.eot);src:local("?"), url(/redesign/global/css/fonts/9E86ED56F0272CCE6.eot?#hfj) format("embedded-opentype");font-weight:normal;font-style:normal;}</style><style type="text/css">html,body,div,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre{margin:0;padding:0;border:0;}a{margin:0;padding:0;border:0;line-height:1.571428em;cursor:pointer;}code,del,dfn,em,img,q,dl,dt,dd,ol,ul,li{margin:0;padding:0;border:0;}abbr,acronym,address,area,b,bdo,big,blockquote,caption,center,cite,code,col,colgroup,dd{line-height:1.571428em;}del{line-height:1.571428em;text-decoration:line-through;}dfn{line-height:1.571428em;font-style:italic;}div,dl,dt,em,font,h3,h4,h5,h6,hr,i,ins,kbd,li,map,ol,p,pre,q,s,samp,small,span,strike,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,tt,u,ul{line-height:1.571428em;}body{color:#383838;font-family:gotham, helvetica, arial, sans-serif;font-size:14px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0;word-wrap:break-word;overflow-wrap:break-word;padding-right:1px;box-sizing:border-box;}a:link,a:visited{color:#047ac6;}a:hover,a:active{color:#2596de;}h1{font-family:gotham, helvetica, arial, sans-serif;font-weight:bold;font-size:1.5em;line-height:1.047619em;margin-bottom:0.4761em;margin-top:0.9523em;}h2{font-family:gotham, helvetica, arial, sans-serif;font-weight:bold;font-size:1.286em;line-height:1.222222em;margin-bottom:0.5556em;margin-top:1.111em;}h3{font-family:gotham, helvetica, arial, sans-serif;font-weight:bold;font-size:1em;margin-bottom:0.714285em;margin-top:1.4285em;}h4,h5,h6{font-family:gotham, helvetica, arial, sans-serif;font-weight:bold;}h4,h5,h6{font-size:1em;font-weight:bold;}div{font-family:gotham, helvetica, arial, sans-serif;font-size:14px;}p{margin-bottom:0.714285em;}img.en-media{margin-bottom:1.286em;max-width:100%;height:auto;}img.en-media[height="1"]{height:1px;}p+img,p+div img{margin-top:0.714285em;}div+img,div+div img{margin-top:0.857412em;}img+img,div+div img+img{margin-top:0;}ul,ol{list-style-position:outside;margin-top:0.2857em;margin-bottom:0.714285em;margin-left:2.7em;padding-left:0;}li ul,li ol{margin-bottom:0;margin-top:0;}p+ul,p+ol,h1+ul,h1+ol,h2+ul,h2+ol{margin-top:-0.428571em;}blockquote{border-left-color:#bfbfbf;border-left-style:solid;border-left-width:2px;margin-left:1.4285em;padding-left:0.714285em;margin-top:1.4285em;margin-bottom:1.4285em;}pre,code{font-family:Monaco, Courier, monospace;}cite{font-style:italic;}table{font-size:1em;}th,td{padding:0.2em 2em 0.2em 0;text-align:left;vertical-align:top;}button.en-ignore{margin-bottom:1em;}.highlight{border:1px solid #62eb92;background:#c9f2d0;}.Decrypted{background-color:#f7f7f7;padding:5px;}.Decrypted .Header{font-family:gotham, helvetica, arial, sans-serif;font-size:11px;padding-bottom:5px;color:#404040;}.Decrypted .Body{background-color:white;padding:5px;}.canvas-container{margin-bottom:10px;border:1px solid #cacaca;background:#fff url(/redesign/global/img/loading-spinner.gif) no-repeat center center;}::selection{background:#c9f2d0;}img[name="en-crypt"]{cursor:pointer;}</style><style type="text/css">::-moz-selection{background:#c9f2d0;}</style></head><body class="ennote" style="overflow-y: hidden;"><div><strong>主键的定义</strong><br clear="none"></div><div><p style="text-indent: 20pt; text-align: left;" align="left"><span style="font-size: 10pt; font-family: 宋体;">关系型数据库中的一条记录中有若干个属性，若其中某一个<strong>属性组</strong></span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">(</span><span style="font-size: 10pt; font-family: 宋体;">注意是组</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">)</span><span style="font-size: 10pt; font-family: 宋体;">能唯一标识一条记录，该属性组就可以成为一个主键。</span></p><p align="left"><span style="font-size: 10pt; font-family: 宋体;">比如：</span></p><p align="left"><span style="font-size: 10pt; font-family: 宋体;">学生表</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">(</span><span style="font-size: 10pt; font-family: 宋体;">学号，姓名，性别，班级</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">)</span></p><p align="left"><span style="font-size: 10pt; font-family: 'Courier New';">&nbsp;&nbsp;&nbsp; </span><span style="font-size: 10pt; font-family: 宋体;">其中每个学生的学号是唯一的，学号就是一个主键；</span></p><p align="left"><span style="font-size: 10pt; font-family: 宋体;">课程表</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">(</span><span style="font-size: 10pt; font-family: 宋体;">课程编号</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">,</span><span style="font-size: 10pt; font-family: 宋体;">课程名</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">,</span><span style="font-size: 10pt; font-family: 宋体;">学分</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">)</span></p><p align="left"><span style="font-size: 10pt; font-family: 'Courier New';">&nbsp;&nbsp;&nbsp; </span><span style="font-size: 10pt; font-family: 宋体;">其中课程编号是唯一的</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">,</span><span style="font-size: 10pt; font-family: 宋体;">课程编号就是一个主键；</span></p><p align="left"><strong><span style="font-size: 10pt; font-family: 宋体;">成绩表</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">(</span><span style="font-size: 10pt; font-family: 宋体;">学号</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">,</span><span style="font-size: 10pt; font-family: 宋体;">课程号</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">,</span><span style="font-size: 10pt; font-family: 宋体;">成绩</span><span style="font-size: 10pt; color: gray; font-family: 'Courier New';">)</span></strong></p><p align="left"><strong><span style="font-size: 10pt; font-family: 'Courier New';">&nbsp;&nbsp;&nbsp;</span></strong><span style="font-size: 10pt; font-family: 'Courier New';"> </span><span style="font-size: 10pt; font-family: 宋体;">成绩表中单一一个属性无法唯一标识一条记录，学号和课程号的组合才可以唯一标识一条记录，所以，学号和课程号的属性组是一个主键。</span><span style="font-size: 10pt; font-family: 宋体;"></span></p><p align="left"><span style="font-size: 10pt; font-family: 宋体;">外键的定义<br clear="none"></span></p><p align="left"><span style="font-size: 10pt; font-family: 宋体;">外键用于与另一张表的关联。<strong>是能确定另一张表记录的字段，用于保持数据的一致性</strong>。比如，A表中的一个字段，是B表的主键，那他就可以是A表的外键。<br clear="none"></span></p><p align="left"><strong><span style="font-size: 10pt; font-family: 宋体;">目的<br clear="none"></span></strong></p><p align="left"><span style="font-size: 10pt; font-family: 宋体;">为了一张表记录的数据不要太过冗余<br clear="none"></span></p><p align="left"><span style="font-size: 10pt; font-family: 宋体;"></span></p><h1>为什么说外键能保持数据的一致性、完整性<br clear="none">
</h1>
<p>你想想，你的图中的第一章表分割成了表1和表2，表2的学号引用了表1的学号字段作为外键，如果不建立外键，只是和表1一样单纯性 地设立一个学号字段，那么和建立外键有什么区别呢？</p>
<p>比如表1中张三的学号为20140900001，那么我在表2中插数据的时候在学号字段插20140900001来记录张三的成绩不也是做到了表 的解耦了吗？</p>
这里存在的问题是，在不设置外键的情况下，表2的学号字段和表1的学号字段是没有关联的。只是你自己认为他们有关系而已，数据库并 
不认为它俩有关系。也就是说，你在表2的学号字段插了一个值（比如20140999999），但是这个值在表1中并没有，这个时候，数据库还是允 
许你插入的，它并不会对插入的数据做关系检查。然而在设置外键的情况下，你插入表2学号字段的值必须要求在表1的学号字段能找到。
 同时，如果你要删除表1的某个学号字段，必须保证表2中没有引用该字段值的列，否则就没法删除。这就是所谓的保持数据的一致性和完整性。你想，如 
果表2还引用表1的某个学号，你却把表1中的这个学号删了，表2就不知道这个学号对应的学生是哪个学生。数据的一致性还包括数据类型的一致性（这 
个见下面就知道了）。<br clear="none"><br clear="none"></div></body></html>